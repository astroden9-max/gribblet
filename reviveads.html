<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Revive Ad Test</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #ad-container {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #111;
    }

    /* Force iframe or image inside ad to fill container */
    #ad-container iframe,
    #ad-container img {
      width: 100% !important;
      height: 100% !important;
      object-fit: cover;
      display: block;
    }
  </style>
</head>
<body>
  <div id="ad-container">
    <script type='text/javascript'>
      var m3_u = (location.protocol=='https:'?
        'https://ec2-13-200-122-214.ap-south-1.compute.amazonaws.com/revive/www/delivery/ajs.php':
        'http://ec2-13-200-122-214.ap-south-1.compute.amazonaws.com/revive/www/delivery/ajs.php');
      var m3_r = Math.floor(Math.random() * 99999999999);
      if (!document.MAX_used) document.MAX_used = ',';
      
      // The start of the script tag (e.g., <script src='...')
      document.write("<scr"+"ipt type='text/javascript' src='"+m3_u); 
      
      document.write("?zoneid=1");
      document.write('&amp;cb=' + m3_r);
      if (document.MAX_used != ',') document.write("&amp;exclude=" + document.MAX_used);
      document.write(document.charset ? '&amp;charset=' + document.charset : (document.characterSet ? '&amp;charset=' + document.characterSet : ''));
      document.write("&amp;loc=" + escape(window.location));
      if (document.referrer) document.write("&amp;referer=" + escape(document.referrer));
      if (document.context) document.write("&context=" + escape(document.context));
      
      // âœ… FIX: Correctly close the attributes and the script tag. The previous version was missing quotes/brackets.
      document.write("'><\/scr"+"ipt>"); 
    </script>
    <noscript>
      <a href='https://ec2-13-200-122-214.ap-south-1.compute.amazonaws.com/revive/www/delivery/ck.php?n=a23e0445&amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'>
        <img src='https://ec2-13-200-122-214.ap-south-1.compute.amazonaws.com/revive/www/delivery/avw.php?zoneid=1&amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;n=a23e0445' border='0' alt='' />
      </a>
    </noscript>

    <script>
      // Set a short delay to allow the Revive ad content (image or iframe) to be fully written to the DOM
      setTimeout(() => {
          // Check for any ad content generated by the Revive script inside the container
          const adContent = document.querySelector('#ad-container img, #ad-container iframe');
          
          if (adContent) {
              console.log("Ad content detected. Signaling parent.");
              try {
                  // Send the success message to the parent frame
                  window.parent.postMessage('ad-loaded-success', '*');
              } catch (e) {
                  console.error("Error sending postMessage:", e);
              }
          } else {
              // No ad content detected, let the parent's timeout handle the fallback
              console.log("No ad content detected, relying on parent timeout.");
          }
      }, 500);
    </script>
  </div>
</body>
</html>